webpackJsonp([2],{"e+cI":function(s,o,e){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var i=e("mtWM"),a=e.n(i),r={name:"RegistroUsuario",mounted:function(){var s=this;this.loading=!0,a.a.get("http://localhost:4567/api/tipo-usuario/lista-tipos").then(function(o){console.log(o),100==o.data.resultado&&(s.tiposUsuario=o.data.tiposUsuario),s.loading=!1})},beforeCreate:function(){var s=this.$session.get("usuario");this.$session.exists()&&null!=s&&2==s.tipo.id||this.$router.push("/usuario/login")},data:function(){return{loading:!1,resultadoOperacion:"",erroresForm:[],disabled:!0,usuario:{nombre:"",contrasena:"",tipo:{id:0},idEmpleado:0},tiposUsuario:[],empleados:[],errorDisponibilidad:""}},methods:{cambioSelect:function(){1==this.usuario.tipo.id&&this.cargarEmpleadosDisponibles()},verificarDisponibilidad:function(){var s=this;""!=this.usuario.nombre&&a.a.get("http://localhost:4567/api/usuario/existe-usuario",{params:{nombreUsuario:this.usuario.nombre}}).then(function(o){console.log(o),1==o.data.existe?(s.disabled=!0,s.errorDisponibilidad="Nombre de usuario ya se encuentra en uso."):(s.errorDisponibilidad="Nombre de usuario disponible.",s.disabled=!1)})},registrarUsuario:function(){var s=this;if(this.loading=!0,this.checkForm()){var o=this.usuario;console.log(o),a.a.post("http://localhost:4567/api/usuario/agregar-usuario",o).then(function(o){console.log(o.data.resultado),1102==o.data.resultado?(s.resultadoOperacion="Usuario agregado satisfactoriamente.",s.limpiarCajas()):1100==o.data.resultado&&(s.resultadoOperacion="Ya existe un usuario con ese nombre.")}),this.loading=!1}},limpiarCajas:function(){this.usuario.nombre="",this.usuario.contrasena="",this.usuario.tipo.id=0,this.usuario.idEmpleado=0,this.empleados=this.cargarEmpleadosDisponibles()},cargarEmpleadosDisponibles:function(){},checkForm:function(){return!(!this.usuario.nombre||!this.usuario.contrasena||0==this.usuario.tipo.id)||(this.erroresForm=[],this.usuario.nombre||this.erroresForm.push("Nombre requerido."),this.usuario.contrasena||this.erroresForm.push("Contraseña requerida."),0==!this.usuario.tipo.id&&this.erroresForm.push("Debes seleccionar un tipo de usuario."),this.disabled=!1,!1)}}},t=function(){var s=this,o=s.$createElement,e=s._self._c||o;return e("div",[e("h1",{staticClass:"mainTitle"},[s._v("\n    Usuarios\n    ")]),s._v(" "),e("hr",{staticClass:"titleUnderline"}),s._v(" "),e("div",{staticClass:"card border-success mb-3"},[e("div",{staticClass:"card-header greenBackground"},[s._v("Registro de Usuarios")]),s._v(" "),e("div",{staticClass:"card-body darkTextCustom"},[e("form",{on:{submit:function(o){o.preventDefault(),s.registrarUsuario()}}},[s.erroresForm.length?e("p",[e("b",[s._v("Por favor corrija lo siguiente:")]),s._v(" "),e("ul",s._l(s.erroresForm,function(o,i){return e("li",{key:i},[s._v(s._s(o))])}))]):s._e(),s._v(" "),e("i",{directives:[{name:"show",rawName:"v-show",value:s.loading,expression:"loading"}],staticClass:"fa fa-spinner fa-spin"}),s._v(" "),e("p",[s._v(s._s(s.resultadoOperacion))]),s._v(" "),e("label",[s._v("Seleccione el tipo de Usuario:")]),s._v(" "),e("select",{directives:[{name:"model",rawName:"v-model",value:s.usuario.tipo.id,expression:"usuario.tipo.id"}],staticClass:"form-control",on:{change:[function(o){var e=Array.prototype.filter.call(o.target.options,function(s){return s.selected}).map(function(s){return"_value"in s?s._value:s.value});s.$set(s.usuario.tipo,"id",o.target.multiple?e:e[0])},s.cambioSelect]}},s._l(s.tiposUsuario,function(o,i){return e("option",{key:i,domProps:{value:o.id}},[s._v("\n                        "+s._s(o.nombre)+"\n                    ")])})),s._v(" "),e("div",{staticClass:"form-group"},[e("label",{staticClass:"darkTextCustom",attrs:{for:"nombre"}},[s._v("Nombre de Usuario")]),s._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:s.usuario.nombre,expression:"usuario.nombre"}],staticClass:"form-control border-success",attrs:{type:"text",id:"nombre",placeholder:"Nombre de Usuario"},domProps:{value:s.usuario.nombre},on:{blur:function(o){s.verificarDisponibilidad()},input:function(o){o.target.composing||s.$set(s.usuario,"nombre",o.target.value)}}}),s._v(" "),e("small",{staticClass:"form-text textMutedCustom",attrs:{id:"emailHelp"}},[s._v(s._s(s.errorDisponibilidad))])]),s._v(" "),e("div",{staticClass:"form-group"},[e("label",{staticClass:"darkTextCustom",attrs:{for:"contrasena"}},[s._v("Contraseña")]),s._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:s.usuario.contrasena,expression:"usuario.contrasena"}],staticClass:"form-control border-success",attrs:{type:"password",id:"contrasena",placeholder:"Contraseña"},domProps:{value:s.usuario.contrasena},on:{input:function(o){o.target.composing||s.$set(s.usuario,"contrasena",o.target.value)}}})]),s._v(" "),e("input",{staticClass:"btn marginBefore tableHeadingBackground",attrs:{type:"submit",disabled:s.disabled,value:"Registrar"}})])])])])};t._withStripped=!0;var n={render:t,staticRenderFns:[]},u=n;var l=e("VU/8")(r,u,!1,null,null,null);l.options.__file="src\\components\\usuario\\RegistroUsuario.vue";o.default=l.exports}});
//# sourceMappingURL=2.b4c9297a2411fc48fbe9.js.map